var page=$("html, body"),body=$("body"),isMobile=!1,isDev=!1,mobileUserAgentString=/Mobile|iP(hone|od|ad)|Android|BlackBerry|IEMobile|Kindle|NetFront|Silk-Accelerated|(hpw|web)OS|Fennec|Minimo|Opera M(obi|ini)|Blazer|Dolfin|Dolphin|Skyfire|Zune/i;mobileUserAgentString.test(navigator.userAgent)&&(isMobile=!0),$(document).ready(function(){function e(){body.prepend('<div id="preload"></div>');var e=$("#preload");$("[data-background-image]").each(function(){var a=$(this).data("background-image");e.append('<img src="'+a+'" alt="">')}),$('[style*="background-image"]').each(function(){var a=$(this).attr("style").replace("background-image: url(","").replace(")","").replace(";","");e.append('<img src="'+a+'" alt="">')}),isMobile||$("[data-music]").each(function(){var a=$(this);e.append('<audio id="music-for-'+a.index(C)+'" loop preload="true"><source src="'+a.data("music")+'" type="audio/mpeg"></audio>')})}function a(e){k.stop().animate({volume:e},1e3)}function t(){var e=$(window).height();M.css("height",e+"px")}function i(){T.each(function(){var e=page.width(),a=page.height(),t=$(this).width(),i=$(this).height(),o=e/2-t/2+"px",s=a/2-i/2+"px";$(this).css({left:o,top:s})})}function o(){T.each(function(){$(this).get(0).play()})}function s(){function e(){s++;var e=parseInt(s/i*100);o.css("width",e+"%"),n.text(e)}var a=$("img"),t=$("audio, video"),i=a.length+t.length,o=$("#loading-bar"),s=0,n=$("#loading-percentage .number");a.load(e),t.each(function(){$(this).get(0).oncanplaythrough=e}),$(window).load(function(){var e=$("#home-video"),a=$(".scroll-message");o.css("width","100%"),n.text("100"),setTimeout(function(){body.addClass("loaded"),e.addClass("show")},250),setTimeout(function(){body.trigger("pageready.np")},isDev?0:2e3),setTimeout(function(){a.addClass("show")},3e3)})}function n(){var e=$(window).width();z.each(function(){var a=$(this),t=a.closest(".container").width(),i=e-t;a.css({left:"-"+i/2+"px",right:"-"+i/2+"px"})})}function l(){var e=$(window).height(),a=e/D;q.css("height",a+"px")}function r(){body.addClass("nav-open").addClass("disable-scroll"),q.each(function(){var e=this,a=$(e).index();setTimeout(function(){$(e).addClass("show")},75*(a+1))}),setTimeout(function(){F.addClass("blur")},250)}function d(){body.removeClass("nav-open").removeClass("disable-scroll"),q.removeClass("show"),setTimeout(function(){F.removeClass("blur")},150)}function c(e,a){for(var t,i=0;i<a.length;i++){var o=a.eq(i);if(e.is(o)){t=i;break}}return t}function h(e){var a,t,i=$(e).hasClass("has-intro"),o=$('section[id*="section"]'),s=$("#home");if(i)a=c(e,o),t=a/o.length*100+"%";else if(e.is(s))t=0;else{a=c(e,j);var n=j.eq(a).prevAll(".has-intro").first(),l=(n.attr("id"),c(n,j)),r=c(n,o),d=r/o.length*100,a=c(e,j),h=(a-l)/L[r]/o.length*100;t=d+h+"%"}P.css("height",t)}function u(e){var a=$(".animate-in",e);a.each(function(){function e(){0==t||a.is("[data-delay]")||a.attr("data-delay",t+"00")}var a=$(this),t=a.index();$.when(e()).done(function(){var e=a.data("delay")||0;setTimeout(function(){a.addClass("reveal")},e)})})}function f(){"undefined"==typeof E?E=N.parallax():E.parallax("enable")}function v(){"undefined"!=typeof E&&E.parallax("disable")}function m(){if(K=$("section.active"),K.is("#home")?(V.addClass("show"),ee.removeClass("show"),G.removeClass("show")):(V.removeClass("show"),G.addClass("show")),K.hasClass("has-overlay")?(_.addClass("show"),Q.addClass("show"),ee.removeClass("show"),f()):(_.removeClass("show"),Q.removeClass("show"),v()),K.hasClass("has-underlay")){var e=K.data("underlay-background");Z.css("background-image","url("+e+")").addClass("show"),ee.removeClass("show")}else Z.removeClass("show");if(K.hasClass("has-background-image")){var a=K.data("background-image");J.css("background-image","url("+a+")").addClass("show")}else J.removeClass("show");K.is("#home")||K.hasClass("has-overlay")||K.hasClass("has-underlay")?W.removeClass("show"):(ee.addClass("show"),W.addClass("show")),h(K)}function w(){u(K)}function g(){ae.each(function(){var e=$(this).find(".timeline-content").offset().top,a=$(this).closest("section").offset().top,t=e-a+ie+oe,i=$(".timeline-border",this);i.css("top",t+"px")}),te.each(function(){var e=$(this).find(".timeline-body").last().height(),a=$(this).find(".timeline-content").innerHeight(),t=$(this).closest("section").height()>560?$(this).closest("section").height():560,i=$(this).find(".timeline-gallery").outerHeight(!0),o=$(this).find(".timeline-slider").outerHeight(!0),s=(t-a)/2+e+i+o-ie,n=$(".timeline-border",this);n.css("bottom",s+"px")})}function p(){ve.each(function(){var e=$(this),a=$(".quote-image",e),t=e.width(),i=e.height(),o=a.width(),s=a.height(),n=t-o,l=i-s,r=a.data("offset-x")||0,d=a.data("offset-y")||0;a.css({left:n/2+r+"px",top:l/2+d+"px"})})}function y(){var e=$("section.active .quote-body .animate-in");e.removeClass("reveal")}function b(){var e=$("section.active .quote-body .animate-in");e.addClass("reveal")}var C=$("section");$.when(e()).done(s);var x=$("#audio-icon"),k=$("audio");x.click(function(){$(this).hasClass("fa-volume-up")?($(this).removeClass("fa-volume-up").addClass("fa-volume-off").addClass("adjust-p-r-6"),a(0)):($(this).removeClass("fa-volume-off").addClass("fa-volume-up").removeClass("adjust-p-r-6"),a(1))});var M=$(".full-parent-height   ");t(),$(window).resize(t);var T=$(".video-background");isMobile&&T.find("source").remove(),$(window).resize(i),$(window).load(i),!isMobile&&T.length>0&&$(window).load(o);var z=$(".quote-background-image");n(),$(window).resize($.debounce(500,n));var q=$("nav > ul > li"),A=$("a",q),D=q.length,S=$("#open-nav-button"),B=$("#close-nav-button"),F=$("#underlay, #clouds, .video-background"),I=$(".main");A.click(function(e){e.preventDefault();var a=$(this).attr("href"),t=$(a).index()+1;d(),I.moveTo(t)}),l(),$(window).resize(l),S.click(r),B.click(d);for(var R=$("#sub-nav > ul > li"),H=$("a",R),P=$("#position-indicator"),j=$("#main section:not(#home)"),L=[],O=1,U=0;U<j.length;U++){var X=j.eq(U);X.hasClass("end")?(X.is(":last-child")&&O--,L.push(O),O=1):O++}H.click(function(e){e.preventDefault();var a=$(this).attr("href"),t=$(a).index()+1;I.moveTo(t)});var Y=$(".logo-container.horizontal > a");Y.click(function(){I.moveTo(1)});var E,K,N=$("#clouds"),Z=$("#underlay"),_=$("#overlay"),G=$("#sub-nav"),J=$("#background-image"),Q=$("#clouds"),V=$("#home-video"),W=$("#background-video"),ee=($("#home #title"),$(".logo-container.horizontal"));body.on("pageready.np",function(){$("#main").onepage_scroll({sectionContainer:"section",easing:"ease",animationTime:isDev?100:1e3,keyboard:!0,direction:"vertical",pagination:!1,loop:!1,beforeMove:m,afterMove:w})});var ae=$(".timeline-entry.start"),te=$(".timeline-entry.end"),ie=30,oe=20;$(window).load(g),$(window).resize($.debounce(750,g));var se=$(".gallery.type-a"),ne=matchMedia("only screen and (max-width: 1024px)").matches?80:0,le=se.closest(".container").width();se.each(function(){function e(){t.unbind().removeClass("active").removeAttr("style"),ne=matchMedia("only screen and (max-width: 1024px)").matches?80:0,le=se.closest(".container").width(),a.Cloud9Carousel({autoPlay:0,bringToFront:!0,smooth:!0,transforms:!0,speed:250,itemClass:"gallery-entry",yRadius:-25,xRadius:(le-ne)/(o-1)}),i.addClass("active"),t.click(function(){t.removeClass("active"),$(this).addClass("active")})}var a=$(this),t=$(".gallery-entry",a),i=t.first(),o=t.length;a.Cloud9Carousel({autoPlay:0,bringToFront:!0,smooth:!0,transforms:!0,speed:250,itemClass:"gallery-entry",yRadius:-25,xRadius:(le-ne)/(o-1)}),i.addClass("active"),t.click(function(){t.removeClass("active"),$(this).addClass("active")}),$(window).resize($.debounce(500,e))});var re=$(".gallery.type-b");if(re.each(function(){function e(){o=matchMedia("only screen and (max-width: 1024px)").matches?60:140,n=$(a).closest(".container").width(),l=matchMedia("only screen and (max-width: 1024px)").matches?80:0,r=n-(i-1)*(o+s)-s-l,$("> li.active",a).css("width",r+"px")}var a=this,t=$("> li",a),i=t.length,o=matchMedia("only screen and (max-width: 1024px)").matches?60:140,s=10,n=$(a).closest(".container").width(),l=matchMedia("only screen and (max-width: 1024px)").matches?80:0,r=n-(i-1)*(o+s)-s-l;t.click(function(){t.removeClass("active").css("width",""),$(this).addClass("active").css("width",r+"px")}),$(window).resize($.debounce(500,e)),t.first().click()}),!isMobile){var de=$(".gallery"),ce=0,he=0,ue=!1;de.on("mousemove",function(e){ue===!0&&($(this).scrollTop(parseInt($(this).scrollTop()+(ce-e.offsetY))),$(this).scrollLeft(parseInt($(this).scrollLeft()+(he-e.offsetX))))}),de.on("mousedown",function(e){ue=!0,ce=e.offsetY,he=e.offsetX,e.preventDefault()}),de.on("mouseup",function(){ue=!1}),de.on("mouseout",function(){ue=!1})}var fe=$(".slider");$("section.has-slider");$(window).load(function(){$.when(fe.twentytwenty()).done(function(){setTimeout(function(){fe.each(function(){var e=this,a=$(e).data("before-text")||"Before",t=$(e).data("after-text")||"After",i=$(".twentytwenty-handle",e),o=$(".twentytwenty-before-label, .twentytwenty-after-label",e);o.remove(),i.append('<div class="twentytwenty-before-label">'+a+"</div>",'<div class="twentytwenty-after-label">'+t+"</div>")}),$(this).trigger("resize")},1e3)})});var ve=$(".quote-image-container");ve.hover(y,b),$(window).resize($.debounce(500,p)),$(window).load(p)});