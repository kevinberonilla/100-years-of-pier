var page=$("html, body"),body=$("body"),isDev=!1;$(document).ready(function(){function e(){body.prepend('<div id="preload"></div>');var e=$("#preload");$("[data-background-image]").each(function(){var a=$(this).data("background-image");e.append('<img src="'+a+'" alt="">')}),$('[style*="background-image"]').each(function(){var a=$(this).attr("style").replace("background-image: url(","").replace(")","").replace(";","");e.append('<img src="'+a+'" alt="">')})}function a(){var e=$(window).height();b.css("height",e+"px")}function t(){C.each(function(){var e=page.width(),a=page.height(),t=$(this).width(),i=$(this).height(),n=e/2-t/2+"px",o=a/2-i/2+"px";$(this).css({left:n,top:o})})}function i(){C.each(function(){$(this).get(0).play()})}function n(){function e(){o++;var e=parseInt(o/i*100);n.css("width",e+"%"),s.text(e)}var a=$("img"),t=$("audio, video"),i=a.length+t.length,n=$("#loading-bar"),o=0,s=$("#loading-percentage .number");a.load(e),t.each(function(){$(this).get().oncanplaythrough=e}),$(window).load(function(){var e=$("#home-video"),a=$(".scroll-message");n.css("width","100%"),s.text("100"),setTimeout(function(){body.addClass("loaded"),e.addClass("show")},250),setTimeout(function(){body.trigger("pageready.np")},isDev?0:2e3),setTimeout(function(){a.addClass("show")},3e3)})}function o(){var e=$(window).width();T.each(function(){var a=$(this),t=a.closest(".container").width(),i=e-t;a.css({left:"-"+i/2+"px",right:"-"+i/2+"px"})})}function s(){var e=$(window).height(),a=e/q;z.css("height",a+"px")}function l(){body.addClass("nav-open").addClass("disable-scroll"),z.each(function(){var e=this,a=$(e).index();setTimeout(function(){$(e).addClass("show")},75*(a+1))}),setTimeout(function(){B.addClass("blur")},250)}function r(){body.removeClass("nav-open").removeClass("disable-scroll"),z.removeClass("show"),setTimeout(function(){B.removeClass("blur")},150)}function d(e,a){for(var t,i=0;i<a.length;i++){var n=a.eq(i);if(e.is(n)){t=i;break}}return t}function c(e){var a,t,i=$(e).hasClass("has-intro"),n=$('section[id*="section"]'),o=$("#home");if(i)a=d(e,n),t=a/n.length*100+"%";else if(e.is(o))t=0;else{a=d(e,P);var s=P.eq(a).prevAll(".has-intro").first(),l=(s.attr("id"),d(s,P)),r=d(s,n),c=r/n.length*100,a=d(e,P),h=(a-l)/S[r]/n.length*100;t=c+h+"%"}H.css("height",t)}function h(e){var a=$(".animate-in",e);a.each(function(){function e(){0==t||a.is("[data-delay]")||a.attr("data-delay",t+"00")}var a=$(this),t=a.index();$.when(e()).done(function(){var e=a.data("delay")||0;setTimeout(function(){a.addClass("reveal")},e)})})}function u(){"undefined"==typeof Y?Y=K.parallax():Y.parallax("enable")}function f(){"undefined"!=typeof Y&&Y.parallax("disable")}function v(){if(E=$("section.active"),E.is("#home")?(J.addClass("show"),U.removeClass("show")):J.removeClass("show"),E.hasClass("has-overlay")?(Z.addClass("show"),G.addClass("show"),U.removeClass("show"),u()):(Z.removeClass("show"),G.removeClass("show"),f()),E.hasClass("has-underlay")){var e=E.data("underlay-background");N.css("background-image","url("+e+")").addClass("show"),U.removeClass("show")}else N.removeClass("show");if(E.hasClass("has-background-image")){var a=E.data("background-image");_.css("background-image","url("+a+")").addClass("show")}else _.removeClass("show");E.is("#home")||E.hasClass("has-overlay")||E.hasClass("has-underlay")?Q.removeClass("show"):(U.addClass("show"),Q.addClass("show")),c(E)}function m(){h(E)}function w(){V.each(function(){var e=$(this).find(".timeline-content").offset().top,a=$(this).closest("section").offset().top,t=e-a+ee+ae,i=$(".timeline-border",this);i.css("top",t+"px")}),W.each(function(){var e=$(this).find(".timeline-body").last().height(),a=$(this).find(".timeline-content").innerHeight(),t=$(this).closest("section").height()>560?$(this).closest("section").height():560,i=$(this).find(".timeline-gallery").outerHeight(!0),n=$(this).find(".timeline-slider").outerHeight(!0),o=(t-a)/2+e+i+n-ee,s=$(".timeline-border",this);s.css("bottom",o+"px")})}function g(){he.each(function(){var e=$(this),a=$(".quote-image",e),t=e.width(),i=e.height(),n=a.width(),o=a.height(),s=t-n,l=i-o,r=a.data("offset-x")||0,d=a.data("offset-y")||0;a.css({left:s/2+r+"px",top:l/2+d+"px"})})}function p(){var e=$("section.active .quote-body .animate-in");e.removeClass("reveal")}function y(){var e=$("section.active .quote-body .animate-in");e.addClass("reveal")}$.when(e()).done(n);var b=$(".full-parent-height");a(),$(window).resize(a);var C=$(".video-background"),x=!1,k=/Mobile|iP(hone|od|ad)|Android|BlackBerry|IEMobile|Kindle|NetFront|Silk-Accelerated|(hpw|web)OS|Fennec|Minimo|Opera M(obi|ini)|Blazer|Dolfin|Dolphin|Skyfire|Zune/i;k.test(navigator.userAgent)&&(C.find("source").remove(),x=!0),$(window).resize(t),$(window).load(t),!x&&C.length>0&&$(window).load(i);var T=$(".quote-background-image");o(),$(window).resize($.debounce(500,o));var z=$("nav > ul > li"),M=$("a",z),q=z.length,D=$("#open-nav-button"),A=$("#close-nav-button"),B=$("#underlay, #clouds, .video-background"),F=$(".main");M.click(function(e){e.preventDefault();var a=$(this).attr("href"),t=$(a).index()+1;r(),F.moveTo(t)}),s(),$(window).resize(s),D.click(l),A.click(r);for(var I=$("#sub-nav > ul > li"),R=$("a",I),H=$("#position-indicator"),P=$("#main section:not(#home)"),S=[],j=1,L=0;L<P.length;L++){var O=P.eq(L);O.hasClass("end")?(O.is(":last-child")&&j--,S.push(j),j=1):j++}R.click(function(e){e.preventDefault();var a=$(this).attr("href"),t=$(a).index()+1;F.moveTo(t)});var X=$(".logo-container.horizontal > a");X.click(function(){F.moveTo(1)});var Y,E,K=$("#clouds"),N=$("#underlay"),Z=$("#overlay"),_=$("#background-image"),G=$("#clouds"),J=$("#home-video"),Q=$("#background-video"),U=($("#home #title"),$(".logo-container.horizontal"));body.on("pageready.np",function(){$("#main").onepage_scroll({sectionContainer:"section",easing:"ease",animationTime:isDev?100:1e3,keyboard:!0,direction:"vertical",pagination:!1,loop:!1,beforeMove:v,afterMove:m})});var V=$(".timeline-entry.start"),W=$(".timeline-entry.end"),ee=30,ae=20;$(window).load(w),$(window).resize($.debounce(750,w));var te=$(".gallery.type-a"),ie=matchMedia("only screen and (max-width: 1024px)").matches?80:0,ne=te.closest(".container").width();te.each(function(){function e(){t.unbind().removeClass("active").removeAttr("style"),ie=matchMedia("only screen and (max-width: 1024px)").matches?80:0,ne=te.closest(".container").width(),a.Cloud9Carousel({autoPlay:0,bringToFront:!0,smooth:!0,transforms:!0,speed:250,itemClass:"gallery-entry",yRadius:-25,xRadius:(ne-ie)/(n-1)}),i.addClass("active"),t.click(function(){t.removeClass("active"),$(this).addClass("active")})}var a=$(this),t=$(".gallery-entry",a),i=t.first(),n=t.length;a.Cloud9Carousel({autoPlay:0,bringToFront:!0,smooth:!0,transforms:!0,speed:250,itemClass:"gallery-entry",yRadius:-25,xRadius:(ne-ie)/(n-1)}),i.addClass("active"),t.click(function(){t.removeClass("active"),$(this).addClass("active")}),$(window).resize($.debounce(500,e))});var oe=$(".gallery.type-b");if(oe.each(function(){function e(){n=matchMedia("only screen and (max-width: 1024px)").matches?60:140,s=$(a).closest(".container").width(),l=matchMedia("only screen and (max-width: 1024px)").matches?80:0,r=s-(i-1)*(n+o)-o-l,$("> li.active",a).css("width",r+"px")}var a=this,t=$("> li",a),i=t.length,n=matchMedia("only screen and (max-width: 1024px)").matches?60:140,o=10,s=$(a).closest(".container").width(),l=matchMedia("only screen and (max-width: 1024px)").matches?80:0,r=s-(i-1)*(n+o)-o-l;t.click(function(){t.removeClass("active").css("width",""),$(this).addClass("active").css("width",r+"px")}),$(window).resize($.debounce(500,e)),t.first().click()}),!x){var se=$(".gallery"),le=0,re=0,de=!1;se.on("mousemove",function(e){de===!0&&($(this).scrollTop(parseInt($(this).scrollTop()+(le-e.offsetY))),$(this).scrollLeft(parseInt($(this).scrollLeft()+(re-e.offsetX))))}),se.on("mousedown",function(e){de=!0,le=e.offsetY,re=e.offsetX,e.preventDefault()}),se.on("mouseup",function(){de=!1}),se.on("mouseout",function(){de=!1})}var ce=$(".slider");$("section.has-slider");$(window).load(function(){$.when(ce.twentytwenty()).done(function(){setTimeout(function(){ce.each(function(){var e=this,a=$(e).data("before-text")||"Before",t=$(e).data("after-text")||"After",i=$(".twentytwenty-handle",e),n=$(".twentytwenty-before-label, .twentytwenty-after-label",e);n.remove(),i.append('<div class="twentytwenty-before-label">'+a+"</div>",'<div class="twentytwenty-after-label">'+t+"</div>")}),$(this).trigger("resize")},1e3)})});var he=$(".quote-image-container");he.hover(p,y),$(window).resize($.debounce(500,g)),$(window).load(g);var ue=$("#music-icon");ue.click(function(){$(this).hasClass("fa-volume-up")?$(this).removeClass("fa-volume-up").addClass("fa-volume-off").addClass("adjust-p-r-6"):$(this).removeClass("fa-volume-off").removeClass("adjust-p-r-6").addClass("fa-volume-up")})});