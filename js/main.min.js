var page=$("html, body"),body=$("body"),isMobile=!1,isDev=!1,mobileUserAgentString=/Mobile|iP(hone|od|ad)|Android|BlackBerry|IEMobile|Kindle|NetFront|Silk-Accelerated|(hpw|web)OS|Fennec|Minimo|Opera M(obi|ini)|Blazer|Dolfin|Dolphin|Skyfire|Zune/i;mobileUserAgentString.test(navigator.userAgent)&&(isMobile=!0),$(document).ready(function(){function e(){body.append('<div id="preload"></div>');var e=$("#preload");$("img").each(function(){var a=$(this).attr("src");e.append('<img src="'+a+'" alt="">')}),$("[data-background-image]").each(function(){var a=$(this).data("background-image");e.append('<img src="'+a+'" alt="">')}),$('[style*="background-image"]').each(function(){var a=$(this).attr("style").replace("background-image: url(","").replace(")","").replace(";","");e.append('<img src="'+a+'" alt="">')}),isMobile||($("[data-music]").each(function(){var a=$(this);e.append('<audio id="music-for-'+a.index("section")+'" loop preload="true"><source src="'+a.data("music")+'" type="audio/mpeg"></audio>')}),$("[data-sound]").each(function(){var a=$(this);e.append('<audio id="sound-for-'+a.index("section")+'" preload="true"><source src="'+a.data("sound")+'" type="audio/mpeg"></audio>')}))}function a(e,a,i){e.stop().animate({volume:a},1e3,"linear",i)}function i(e){z.each(function(){var e=$(this);a(e,0,function(){e[0].pause()})}),e[0].play(),a(e,A)}function t(e){if(e.hasClass("end")){var a=e.prevAll(".has-intro").first().index("section"),t=$("#music-for-"+a);i(t)}else if(e.hasClass("has-intro")){var o=e.index("section"),s=$("#music-for-"+o);i(s)}else e.is("#home")&&i($("#music-for-0"))}function o(e){var i=e.index("section"),t=$("#sound-for-"+i),o=q.not(t);a(q,0,function(){o[0].pause(),o[0].currentTime=0}),t.length>0&&(t[0].play(),a(t,A))}function s(){var e=$(window).height();D.css("height",e+"px")}function n(){S.each(function(){var e=page.width(),a=page.height(),i=$(this).width(),t=$(this).height(),o=e/2-i/2+"px",s=a/2-t/2+"px";$(this).css({left:o,top:s})})}function r(){S.each(function(){$(this)[0].play()})}function d(){function e(){s++;var e=parseInt(s/t*100);o.css("width",e+"%"),n.text(e),s===t&&body.trigger("load.np")}var a=$("#preload img"),i=$("#preload audio, #preload video"),t=a.length+i.length,o=$("#loading-bar"),s=0,n=$("#loading-percentage .number");a.load(e),i.each(function(){$(this)[0].oncanplay=e}),page.one("load.np",function(){var e=$("#home-video"),a=$("#music-for-0"),i=$(".scroll-message");setTimeout(function(){body.addClass("loaded"),e.addClass("show"),isMobile||a[0].play()},250),setTimeout(function(){body.trigger("start.np")},isDev?0:2e3),setTimeout(function(){i.addClass("show")},3e3)})}function l(){var e=$(window).width();B.each(function(){var a=$(this),i=a.closest(".container").width(),t=e-i;a.css({left:"-"+t/2+"px",right:"-"+t/2+"px"})})}function c(){var e=$(window).height(),a=$(window).width(),i=matchMedia("only screen and (max-width: 480px)").matches?e-a/R-5:e,t=i/R;F.css("height",t+"px")}function h(){body.addClass("nav-open").addClass("disable-scroll"),F.each(function(){var e=this,a=$(e).index();setTimeout(function(){$(e).addClass("show")},75*(a+1))}),setTimeout(function(){j.addClass("blur")},250)}function u(){body.removeClass("nav-open").removeClass("disable-scroll"),F.removeClass("show"),setTimeout(function(){j.removeClass("blur")},150)}function f(e,a){for(var i,t=0;t<a.length;t++){var o=a.eq(t);if(e.is(o)){i=t;break}}return i}function v(e){var a,i,t,o=$(e).hasClass("has-intro"),s=$('section[id*="chapter"]'),n=$("#home");if(O.removeClass("active"),o)a=f(e,s),i=$('[href="#'+s.eq(a).attr("id")+'"]',O).parent(),t=a/s.length*100+"%";else if(e.is(n))t=0;else{a=f(e,Y);var r=Y.eq(a).prevAll(".has-intro").first(),d=(r.attr("id"),f(r,Y)),l=f(r,s),c=l/s.length*100,a=f(e,Y),h=(a-d)/E[l]/s.length*100;i=$('[href="#'+Y.eq(d).attr("id")+'"]',O).parent(),t=c+h+"%"}X.css({width:"",height:""}),matchMedia("only screen and (max-width: 480px)").matches?X.css("width",t):X.css("height",t),i&&i.addClass("active")}function m(e){var a=$(".animate-in",e);a.each(function(){function e(){0==i||a.is("[data-delay]")||a.attr("data-delay",i+"00")}var a=$(this),i=a.index();$.when(e()).done(function(){var e=a.data("delay")||0;setTimeout(function(){a.addClass("reveal")},e)})})}function p(e,a){switch(a){case"clouds":"undefined"==typeof G?G=e.parallax():G.parallax("enable");break;case"fireworks":"undefined"==typeof J?J=e.parallax():J.parallax("enable")}}function w(e){switch(e){case"clouds":"undefined"!=typeof G&&G.parallax("disable");break;case"fireworks":"undefined"!=typeof J&&J.parallax("disable")}}function g(){var e=$("> li",W);W.addClass("show"),e.each(function(){var e=$("img",this),a=$(this).index();setTimeout(function(){e.addClass("show")},100*a)})}function b(){if(Q=$("section.active"),Q.is("#home")?(oe.addClass("show"),ne.removeClass("show"),ie.removeClass("show"),W.addClass("show"),p(W,"fireworks")):(oe.removeClass("show"),ie.addClass("show"),ne.addClass("show"),W.removeClass("show"),w("fireworks")),Q.hasClass("has-overlay")?(ae.addClass("show"),V.addClass("show"),p(V,"clouds")):(ae.removeClass("show"),V.removeClass("show"),w("clouds")),Q.hasClass("has-underlay")){var e=Q.data("underlay-background");ee.css("background-image","url("+e+")").addClass("show")}else ee.removeClass("show");if(Q.hasClass("has-background-image")){var a=Q.data("background-image");te.css("background-image","url("+a+")").addClass("show")}else te.removeClass("show");Q.is("#home")||Q.hasClass("has-overlay")||Q.hasClass("has-underlay")?se.removeClass("show"):se.addClass("show"),v(Q),setTimeout(function(){m(Q),isMobile||(t(Q),o(Q))},1e3)}function y(){re.each(function(){var e=$(this).find(".timeline-content").offset().top,a=$(this).closest("section").offset().top,i=e-a+le+ce,t=$(".timeline-border",this);t.css("top",i+"px")}),de.each(function(){var e=$(this).find(".timeline-body").last().height(),a=$(this).find(".timeline-content").innerHeight(),i=$(this).closest("section").height()>560?$(this).closest("section").height():560,t=$(this).find(".timeline-gallery").outerHeight(!0),o=$(this).find(".timeline-slider").outerHeight(!0),s=(i-a)/2+e+t+o-le,n=$(".timeline-border",this);n.css("bottom",s+"px")})}function C(){be.each(function(){var e=$(this),a=$(".quote-image",e),i=e.width(),t=e.height(),o=a.width(),s=a.height(),n=i-o,r=t-s,d=a.data("offset-x")||0,l=a.data("offset-y")||0;a.css({left:n/2+d+"px",top:r/2+l+"px"})})}function x(){var e=$("section.active .quote-body .animate-in");e.removeClass("reveal")}function k(){var e=$("section.active .quote-body .animate-in");e.addClass("reveal")}$.when(e()).done(d);var M=$("#audio-icon"),T=$("audio"),z=$('audio[id*="music-for"]'),q=$('audio[id*="sound-for"]'),A=1;isMobile?M.remove().unbind():M.click(function(){$(this).hasClass("fa-volume-up")?($(this).removeClass("fa-volume-up").addClass("fa-volume-off").addClass("adjust-p-r-6"),A=0):($(this).removeClass("fa-volume-off").addClass("fa-volume-up").removeClass("adjust-p-r-6"),A=1),T.each(function(){$(this)[0].volume=A})});var D=$(".full-parent-height   ");s(),$(window).resize(s);var S=$(".video-background");isMobile&&S.find("source").remove(),$(window).resize(n),$(window).load(n),!isMobile&&S.length>0&&$(window).load(r);var B=$(".quote-background-image");l(),$(window).resize($.debounce(500,l));var F=$("nav > ul > li"),I=$("a",F),R=F.length,H=$("#open-nav-button"),P=$("#close-nav-button"),j=$("#underlay, #clouds, #fireworks, .video-background"),L=$(".main");I.click(function(e){e.preventDefault();var a=$(this).attr("href"),i=$(a).index()+1;u(),L.moveTo(i)}),c(),$(window).resize($.debounce(750,c)),H.click(h),P.click(u);for(var O=$("#sub-nav > ul > li"),U=$("a",O),X=$("#position-indicator"),Y=$("section:not(#home)"),E=[],K=1,N=0;N<Y.length;N++){var Z=Y.eq(N);Z.hasClass("end")?(E.push(K),K=1):K++}U.click(function(e){e.preventDefault();var a=$(this).attr("href"),i=$(a).index()+1;L.moveTo(i)}),$(window).resize($.debounce(750,function(){v($("section.active"))}));var _=$(".logo-container.horizontal > a");_.click(function(){L.moveTo(1)});var G,J,Q,V=$("#clouds"),W=$("#fireworks"),ee=$("#underlay"),ae=$("#overlay"),ie=$("#sub-nav"),te=$("#background-image"),oe=$("#home-video"),se=$("#background-video"),ne=($("#home #title"),$(".logo-container.horizontal"));body.one("start.np",function(){$("#main").onepage_scroll({sectionContainer:"section",easing:"ease",animationTime:isDev?100:1e3,keyboard:!0,direction:"vertical",pagination:!1,loop:!1,beforeMove:b}),p(W,"fireworks"),g()});var re=$(".timeline-entry.start"),de=$(".timeline-entry.end"),le=30,ce=20;$(window).load(y),$(window).resize($.debounce(750,y));var he=$(".gallery.type-a"),ue=matchMedia("only screen and (max-width: 1024px)").matches?240:80,fe=he.closest(".container").width();he.each(function(){function e(){i.unbind().removeClass("active").removeAttr("style"),ue=matchMedia("only screen and (max-width: 1024px)").matches?240:80,fe=he.closest(".container").width(),a.Cloud9Carousel({autoPlay:0,bringToFront:!0,smooth:!0,transforms:!0,speed:250,itemClass:"gallery-entry",yRadius:-25,xRadius:(fe-ue)/(o-1)}),t.addClass("active"),i.click(function(){i.removeClass("active"),$(this).addClass("active")})}var a=$(this),i=$(".gallery-entry",a),t=i.first(),o=i.length;a.Cloud9Carousel({autoPlay:0,bringToFront:!0,smooth:!0,transforms:!0,speed:250,itemClass:"gallery-entry",yRadius:-25,xRadius:(fe-ue)/(o-1)}),t.addClass("active"),i.click(function(){i.removeClass("active"),$(this).addClass("active")}),$(window).resize($.debounce(500,e))});var $e=$(".gallery.type-b");if($e.each(function(){function e(){o=matchMedia("only screen and (max-width: 1024px)").matches?60:120,n=$(a).closest(".container").width(),r=matchMedia("only screen and (max-width: 1024px)").matches?240:80,d=n-(t-1)*(o+s)-s-r,$("> li.active",a).css("width",d+"px")}var a=this,i=$("> li",a),t=i.length,o=matchMedia("only screen and (max-width: 1024px)").matches?60:120,s=10,n=$(a).closest(".container").width(),r=matchMedia("only screen and (max-width: 1024px)").matches?240:80,d=n-(t-1)*(o+s)-s-r;i.click(function(){i.removeClass("active").css("width",""),$(this).addClass("active").css("width",d+"px")}),$(window).resize($.debounce(500,e)),i.first().click()}),!isMobile){var ve=$(".gallery"),me=0,pe=0,we=!1;ve.on("mousemove",function(e){we===!0&&($(this).scrollTop(parseInt($(this).scrollTop()+(me-e.offsetY))),$(this).scrollLeft(parseInt($(this).scrollLeft()+(pe-e.offsetX))))}),ve.on("mousedown",function(e){we=!0,me=e.offsetY,pe=e.offsetX,e.preventDefault()}),ve.on("mouseup",function(){we=!1}),ve.on("mouseout",function(){we=!1})}var ge=$(".slider");$("section.has-slider");$(window).load(function(){$.when(ge.twentytwenty()).done(function(){setTimeout(function(){ge.each(function(){var e=this,a=$(e).data("before-text")||"Before",i=$(e).data("after-text")||"After",t=$(".twentytwenty-handle",e),o=$(".twentytwenty-before-label, .twentytwenty-after-label",e);o.remove(),t.append('<div class="twentytwenty-before-label">'+a+"</div>",'<div class="twentytwenty-after-label">'+i+"</div>")}),$(this).trigger("resize")},1e3)})});var be=$(".quote-image-container");be.hover(x,k),$(window).resize($.debounce(500,C)),$(window).load(C)});