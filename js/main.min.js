var page=$("html, body"),isDev=!1;$(document).ready(function(){function e(){var e=$("#preload");$("[data-background-image]").each(function(){var a=$(this).data("background-image");e.append('<img src="'+a+'" alt="">')}),$('[style*="background-image"]').each(function(){var a=$(this).attr("style").replace("background-image: url(","").replace(")","").replace(";","");e.append('<img src="'+a+'" alt="">')})}function a(){var e=$(window).height();y.css("height",e+"px")}function t(){C.each(function(){var e=page.width(),a=page.height(),t=$(this).width(),o=$(this).height(),i=e/2-t/2+"px",n=a/2-o/2+"px";$(this).css({left:i,top:n})})}function o(){C.each(function(){$(this).get(0).play()})}function i(){function e(){i++;var e=parseInt(i/t*100);o.css("width",e+"%"),n.text(e)}var a=$("img, video"),t=a.length,o=$("#loading-bar"),i=0,n=$("#loading-percentage .number");a.load(e),$(window).load(function(){var e=$("body"),a=$("#home-video"),t=$(".scroll-message");o.css("width","100%"),n.text("100"),setTimeout(function(){e.addClass("loaded"),a.addClass("show")},250),setTimeout(function(){$("body").trigger("pageready.np")},isDev?0:2e3),setTimeout(function(){t.addClass("show")},3e3)})}function n(){var e=$(window).width();k.each(function(){var a=$(this),t=a.closest(".container").width(),o=e-t;a.css({left:"-"+o/2+"px",right:"-"+o/2+"px"})})}function s(){var e=$(window).height(),a=e/M;T.css("height",a+"px")}function l(){$("body").addClass("nav-open").addClass("disable-scroll"),T.each(function(){var e=this,a=$(e).index();setTimeout(function(){$(e).addClass("show")},75*(a+1))}),setTimeout(function(){A.addClass("blur")},250)}function r(){$("body").removeClass("nav-open").removeClass("disable-scroll"),T.removeClass("show"),setTimeout(function(){A.removeClass("blur")},150)}function d(e){var a,t=$(e).hasClass("has-intro"),o=$('section[id*="section"]'),i=$("#home");if(t)for(var n=0;n<o.length;n++){var s=o.eq(n);e.is(s)&&(a=n)}else if(!e.is(i)){for(var l,r,n=0;n<R.length;n++){var s=R.eq(n);e.is(s)&&(l=s.prevAll(".has-intro").first(),r=n)}console.log(l),console.log(r)}}function c(e){var a=$(".animate-in",e);a.each(function(){function e(){0==t||a.is("[data-delay]")||a.attr("data-delay",t+"00")}var a=$(this),t=a.index();$.when(e()).done(function(){var e=a.data("delay")||0;setTimeout(function(){a.addClass("reveal")},e)})})}function h(){"undefined"==typeof O?O=Y.parallax():O.parallax("enable")}function u(){"undefined"!=typeof O&&O.parallax("disable")}function f(){if(X=$("section.active"),X.is("#home")?(_.addClass("show"),J.removeClass("show")):_.removeClass("show"),X.hasClass("has-overlay")?(K.addClass("show"),Z.addClass("show"),J.removeClass("show"),h()):(K.removeClass("show"),Z.removeClass("show"),u()),X.hasClass("has-underlay")){var e=X.data("underlay-background");E.css("background-image","url("+e+")").addClass("show"),J.removeClass("show")}else E.removeClass("show");if(X.hasClass("has-background-image")){var a=X.data("background-image");N.css("background-image","url("+a+")").addClass("show")}else N.removeClass("show");X.is("#home")||X.hasClass("has-overlay")||X.hasClass("has-underlay")?G.removeClass("show"):(J.addClass("show"),G.addClass("show"))}function v(){c(X),d(X)}function m(){Q.each(function(){var e=$(this).find(".timeline-content").offset().top,a=$(this).closest("section").offset().top,t=e-a+V+W,o=$(".timeline-border",this);o.css("top",t+"px")}),U.each(function(){var e=$(this).find(".timeline-body").last().height(),a=$(this).find(".timeline-content").innerHeight(),t=$(this).closest("section").height()>560?$(this).closest("section").height():560,o=$(this).find(".timeline-gallery").outerHeight(!0),i=$(this).find(".timeline-slider").outerHeight(!0),n=(t-a)/2+e+o+i-V,s=$(".timeline-border",this);s.css("bottom",n+"px")})}function w(){de.each(function(){var e=$(this),a=$(".quote-image",e),t=e.width(),o=e.height(),i=a.width(),n=a.height(),s=t-i,l=o-n,r=a.data("offset-x")||0,d=a.data("offset-y")||0;a.css({left:s/2+r+"px",top:l/2+d+"px"})})}function g(){var e=$("section.active .quote-body .animate-in");e.removeClass("reveal")}function p(){var e=$("section.active .quote-body .animate-in");e.addClass("reveal")}$.when(e()).done(i);var y=$(".full-parent-height");a(),$(window).resize(a);var C=$(".video-background"),b=!1,x=/Mobile|iP(hone|od|ad)|Android|BlackBerry|IEMobile|Kindle|NetFront|Silk-Accelerated|(hpw|web)OS|Fennec|Minimo|Opera M(obi|ini)|Blazer|Dolfin|Dolphin|Skyfire|Zune/i;x.test(navigator.userAgent)&&(C.find("source").remove(),b=!0),$(window).resize(t),$(window).load(t),!b&&C.length>0&&$(window).load(o);var k=$(".quote-background-image");n(),$(window).resize($.debounce(500,n));var T=$("nav > ul > li"),z=$("a",T),M=T.length,q=$("#open-nav-button"),D=$("#close-nav-button"),A=$("#underlay, #clouds, .video-background"),B=$(".main");z.click(function(e){e.preventDefault();var a=$(this).attr("href"),t=$(a).index()+1;r(),B.moveTo(t)}),s(),$(window).resize(s),q.click(l),D.click(r);for(var F=$("#sub-nav > ul > li"),I=$("a",F),R=($("#position-indicator"),$("#main section:not(#home)")),H=[],P=0,S=0;S<R.length;S++){var j=R.eq(S);j.hasClass("end")?(H.push(P),P=0):P++}console.log(H),I.click(function(e){e.preventDefault();var a=$(this).attr("href"),t=$(a).index()+1;B.moveTo(t)});var L=$(".logo-container.horizontal > a");L.click(function(){B.moveTo(1)});var O,X,Y=$("#clouds"),E=$("#underlay"),K=$("#overlay"),N=$("#background-image"),Z=$("#clouds"),_=$("#home-video"),G=$("#background-video"),J=($("#home #title"),$(".logo-container.horizontal"));$("body").on("pageready.np",function(){$("#main").onepage_scroll({sectionContainer:"section",easing:"ease",animationTime:isDev?100:1e3,keyboard:!0,direction:"vertical",pagination:!1,loop:!1,beforeMove:f,afterMove:v})});var Q=$(".timeline-entry.start"),U=$(".timeline-entry.end"),V=30,W=20;$(window).load(m),$(window).resize($.debounce(750,m));var ee=$(".gallery.type-a"),ae=matchMedia("only screen and (max-width: 1024px)").matches?80:0,te=ee.closest(".container").width();ee.each(function(){function e(){t.unbind().removeClass("active").removeAttr("style"),ae=matchMedia("only screen and (max-width: 1024px)").matches?80:0,te=ee.closest(".container").width(),a.Cloud9Carousel({autoPlay:0,bringToFront:!0,smooth:!0,transforms:!0,speed:250,itemClass:"gallery-entry",yRadius:-25,xRadius:(te-ae)/(i-1)}),o.addClass("active"),t.click(function(){t.removeClass("active"),$(this).addClass("active")})}var a=$(this),t=$(".gallery-entry",a),o=t.first(),i=t.length;a.Cloud9Carousel({autoPlay:0,bringToFront:!0,smooth:!0,transforms:!0,speed:250,itemClass:"gallery-entry",yRadius:-25,xRadius:(te-ae)/(i-1)}),o.addClass("active"),t.click(function(){t.removeClass("active"),$(this).addClass("active")}),$(window).resize($.debounce(500,e))});var oe=$(".gallery.type-b");if(oe.each(function(){function e(){i=matchMedia("only screen and (max-width: 1024px)").matches?60:140,s=$(a).closest(".container").width(),l=matchMedia("only screen and (max-width: 1024px)").matches?80:0,r=s-(o-1)*(i+n)-n-l,$("> li.active",a).css("width",r+"px")}var a=this,t=$("> li",a),o=t.length,i=matchMedia("only screen and (max-width: 1024px)").matches?60:140,n=10,s=$(a).closest(".container").width(),l=matchMedia("only screen and (max-width: 1024px)").matches?80:0,r=s-(o-1)*(i+n)-n-l;t.click(function(){t.removeClass("active").css("width",""),$(this).addClass("active").css("width",r+"px")}),$(window).resize($.debounce(500,e)),t.first().click()}),!b){var ie=$(".gallery"),ne=0,se=0,le=!1;ie.on("mousemove",function(e){le===!0&&($(this).scrollTop(parseInt($(this).scrollTop()+(ne-e.offsetY))),$(this).scrollLeft(parseInt($(this).scrollLeft()+(se-e.offsetX))))}),ie.on("mousedown",function(e){le=!0,ne=e.offsetY,se=e.offsetX,e.preventDefault()}),ie.on("mouseup",function(){le=!1}),ie.on("mouseout",function(){le=!1})}var re=$(".slider");$("section.has-slider");$(window).load(function(){$.when(re.twentytwenty()).done(function(){setTimeout(function(){re.each(function(){var e=this,a=$(e).data("before-text")||"Before",t=$(e).data("after-text")||"After",o=$(".twentytwenty-handle",e),i=$(".twentytwenty-before-label, .twentytwenty-after-label",e);i.remove(),o.append('<div class="twentytwenty-before-label">'+a+"</div>",'<div class="twentytwenty-after-label">'+t+"</div>")}),$(this).trigger("resize")},1e3)})});var de=$(".quote-image-container");de.hover(g,p),$(window).resize($.debounce(500,w)),$(window).load(w);var ce=$("#music-icon");ce.click(function(){$(this).hasClass("fa-volume-up")?$(this).removeClass("fa-volume-up").addClass("fa-volume-off").addClass("adjust-p-r-6"):$(this).removeClass("fa-volume-off").removeClass("adjust-p-r-6").addClass("fa-volume-up")})});